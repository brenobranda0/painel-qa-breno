<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QA Progress Tracker ‚Äî Breno</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #030712;
            color: #f3f4f6;
        }

        .glass {
            background: rgba(17, 24, 39, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #374151;
            border-radius: 10px;
        }

        .gradient-text {
            background: linear-gradient(135deg, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .checkbox-card:checked + div {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body class="custom-scrollbar">

    <!-- Top Navigation Bar -->
    <nav class="sticky top-0 z-50 glass border-b border-gray-800 px-4 py-3">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/20">
                    <i data-lucide="shield-check" class="text-white w-6 h-6"></i>
                </div>
                <div>
                    <h1 class="text-lg font-bold leading-tight">Painel QA <span class="text-blue-400">Breno</span></h1>
                    <p class="text-xs text-gray-400">Meta: Est√°gio em 90 dias</p>
                </div>
            </div>

            <div class="flex items-center gap-3">
                <div class="hidden lg:flex flex-col items-end mr-4">
                    <div class="flex items-center gap-2 mb-1">
                        <span class="text-[10px] uppercase tracking-wider text-gray-500 font-bold">Progresso Geral</span>
                        <span id="pct" class="text-xs font-mono text-blue-400">0%</span>
                    </div>
                    <div class="w-48 h-1.5 bg-gray-800 rounded-full overflow-hidden">
                        <div id="bar" class="h-full bg-blue-500 transition-all duration-500" style="width: 0%"></div>
                    </div>
                </div>
                <button id="markDay" class="flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-all">
                    <i data-lucide="check-circle-2" class="w-4 h-4"></i>
                    <span>Concluir Hoje</span>
                </button>
                <div class="flex gap-1">
                    <button id="exportBtn" title="Exportar Backup" class="p-2 hover:bg-gray-800 rounded-lg text-gray-400 transition-colors">
                        <i data-lucide="download" class="w-5 h-5"></i>
                    </button>
                    <label class="p-2 hover:bg-gray-800 rounded-lg text-gray-400 cursor-pointer transition-colors">
                        <i data-lucide="upload" class="w-5 h-5"></i>
                        <input id="importInput" type="file" accept="application/json" class="hidden" />
                    </label>
                    <button id="resetBtn" title="Resetar Dados" class="p-2 hover:bg-red-900/20 text-red-400 rounded-lg transition-colors">
                        <i data-lucide="trash-2" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        <!-- Sidebar Navigation -->
        <aside class="lg:col-span-3 space-y-6">
            <div class="glass rounded-2xl p-4 space-y-1">
                <p class="px-3 pb-2 text-[10px] font-bold text-gray-500 uppercase tracking-widest">Menu</p>
                <a href="#today" class="flex items-center justify-between p-3 rounded-xl hover:bg-gray-800/50 text-gray-300 transition-all group">
                    <div class="flex items-center gap-3">
                        <i data-lucide="layout-grid" class="w-5 h-5 group-hover:text-blue-400"></i>
                        <span class="text-sm font-medium">Hoje</span>
                    </div>
                    <span id="todayPill" class="text-[10px] bg-blue-500/10 text-blue-400 px-2 py-0.5 rounded-full border border-blue-500/20">0/4</span>
                </a>
                <a href="#dashboard" class="flex items-center justify-between p-3 rounded-xl hover:bg-gray-800/50 text-gray-300 transition-all group">
                    <div class="flex items-center gap-3">
                        <i data-lucide="bar-chart-3" class="w-5 h-5 group-hover:text-purple-400"></i>
                        <span class="text-sm font-medium">Analytics</span>
                    </div>
                    <span id="streakPill" class="text-[10px] bg-orange-500/10 text-orange-400 px-2 py-0.5 rounded-full border border-orange-500/20">0 üî•</span>
                </a>
                <a href="#weeks" class="flex items-center justify-between p-3 rounded-xl hover:bg-gray-800/50 text-gray-300 transition-all group">
                    <div class="flex items-center gap-3">
                        <i data-lucide="calendar-days" class="w-5 h-5 group-hover:text-green-400"></i>
                        <span class="text-sm font-medium">Cronograma</span>
                    </div>
                </a>
                <a href="#assistant" class="flex items-center justify-between p-3 rounded-xl hover:bg-gray-800/50 text-gray-300 transition-all group">
                    <div class="flex items-center gap-3">
                        <i data-lucide="bot" class="w-5 h-5 group-hover:text-pink-400"></i>
                        <span class="text-sm font-medium">Assistente</span>
                    </div>
                </a>
            </div>

            <div class="glass rounded-2xl p-5">
                <h3 class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-4">Links √öteis</h3>
                <div class="grid grid-cols-2 gap-2">
                    <a href="https://github.com" target="_blank" class="flex items-center justify-center p-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors text-xs">GitHub</a>
                    <a href="https://linkedin.com" target="_blank" class="flex items-center justify-center p-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors text-xs">LinkedIn</a>
                    <a href="https://gupy.io" target="_blank" class="flex items-center justify-center p-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors text-xs">Gupy</a>
                    <a href="#" class="flex items-center justify-center p-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors text-xs italic">Portf√≥lio</a>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="lg:col-span-9 space-y-8">
            
            <!-- HOJE SECTION -->
            <section id="today" class="scroll-mt-24">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-bold flex items-center gap-2">
                        <i data-lucide="flame" class="text-orange-500 w-6 h-6"></i>
                        Checklist Di√°rio
                    </h2>
                    <span id="todayDate" class="text-xs font-mono text-gray-500">YYYY-MM-DD</span>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Task Item -->
                    <label class="relative group cursor-pointer">
                        <input type="checkbox" data-today="study" class="checkbox-card hidden peer">
                        <div class="glass p-5 rounded-2xl border-2 border-transparent peer-checked:border-blue-500/50 transition-all flex items-center gap-4">
                            <div class="w-12 h-12 rounded-xl bg-blue-500/10 flex items-center justify-center text-blue-400 group-hover:scale-110 transition-transform">
                                <i data-lucide="book-open"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-bold text-sm">Estudos QA</p>
                                <p class="text-xs text-gray-400">Postman, Cypress, Teoria</p>
                            </div>
                            <div class="w-6 h-6 rounded-full border-2 border-gray-700 flex items-center justify-center peer-checked:bg-blue-500 peer-checked:border-blue-500">
                                <i data-lucide="check" class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100"></i>
                            </div>
                        </div>
                    </label>

                    <label class="relative group cursor-pointer">
                        <input type="checkbox" data-today="project" class="checkbox-card hidden peer">
                        <div class="glass p-5 rounded-2xl border-2 border-transparent peer-checked:border-emerald-500/50 transition-all flex items-center gap-4">
                            <div class="w-12 h-12 rounded-xl bg-emerald-500/10 flex items-center justify-center text-emerald-400 group-hover:scale-110 transition-transform">
                                <i data-lucide="code-2"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-bold text-sm">Projeto Pr√°tico</p>
                                <p class="text-xs text-gray-400">Evoluir reposit√≥rio/testes</p>
                            </div>
                            <div class="w-6 h-6 rounded-full border-2 border-gray-700 flex items-center justify-center"></div>
                        </div>
                    </label>

                    <label class="relative group cursor-pointer">
                        <input type="checkbox" data-today="jobs" class="checkbox-card hidden peer">
                        <div class="glass p-5 rounded-2xl border-2 border-transparent peer-checked:border-purple-500/50 transition-all flex items-center gap-4">
                            <div class="w-12 h-12 rounded-xl bg-purple-500/10 flex items-center justify-center text-purple-400 group-hover:scale-110 transition-transform">
                                <i data-lucide="send"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-bold text-sm">Vagas</p>
                                <p class="text-xs text-gray-400">5 candidaturas m√≠nimas</p>
                            </div>
                            <div class="w-6 h-6 rounded-full border-2 border-gray-700 flex items-center justify-center"></div>
                        </div>
                    </label>

                    <label class="relative group cursor-pointer">
                        <input type="checkbox" data-today="train" class="checkbox-card hidden peer">
                        <div class="glass p-5 rounded-2xl border-2 border-transparent peer-checked:border-pink-500/50 transition-all flex items-center gap-4">
                            <div class="w-12 h-12 rounded-xl bg-pink-500/10 flex items-center justify-center text-pink-400 group-hover:scale-110 transition-transform">
                                <i data-lucide="dumbbell"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-bold text-sm">Sa√∫de</p>
                                <p class="text-xs text-gray-400">Treino / Medita√ß√£o</p>
                            </div>
                            <div class="w-6 h-6 rounded-full border-2 border-gray-700 flex items-center justify-center"></div>
                        </div>
                    </label>
                </div>

                <div class="mt-4 flex justify-end">
                    <button id="saveTodayAsLog" class="text-xs font-bold text-gray-400 hover:text-white flex items-center gap-2 transition-colors">
                        <i data-lucide="history" class="w-4 h-4"></i>
                        Arquivar dia no hist√≥rico
                    </button>
                </div>
            </section>

            <!-- DASHBOARD SECTION -->
            <section id="dashboard" class="scroll-mt-24 space-y-6">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="glass p-5 rounded-2xl text-center">
                        <p class="text-[10px] font-bold text-gray-500 uppercase mb-1">Streak</p>
                        <p id="streak" class="text-3xl font-black text-orange-500">0</p>
                        <p class="text-[10px] text-gray-400">dias seguidos</p>
                    </div>
                    <div class="glass p-5 rounded-2xl text-center">
                        <p class="text-[10px] font-bold text-gray-500 uppercase mb-1">Dias 4/4</p>
                        <p id="daysDone" class="text-3xl font-black text-blue-400">0</p>
                        <p class="text-[10px] text-gray-400">total hist√≥rico</p>
                    </div>
                    <div class="glass p-5 rounded-2xl text-center">
                        <p class="text-[10px] font-bold text-gray-500 uppercase mb-1">Fase</p>
                        <p id="phaseBadge" class="text-3xl font-black text-emerald-400">1</p>
                        <p class="text-[10px] text-gray-400">da jornada</p>
                    </div>
                    <div class="glass p-5 rounded-2xl text-center">
                        <p class="text-[10px] font-bold text-gray-500 uppercase mb-1">Consist√™ncia</p>
                        <p id="consistency" class="text-3xl font-black text-purple-400">0%</p>
                        <p class="text-[10px] text-gray-400">√∫ltimos 14 dias</p>
                    </div>
                </div>

                <div class="glass p-6 rounded-3xl">
                    <h3 class="text-sm font-bold mb-6 text-gray-300">Desempenho (√öltimos 21 dias)</h3>
                    <div class="h-64">
                        <canvas id="chart"></canvas>
                    </div>
                </div>
            </section>

            <!-- WEEKS SECTION -->
            <section id="weeks" class="scroll-mt-24">
                <div class="flex items-center gap-4 mb-6">
                    <h2 class="text-xl font-bold italic">Semanas de Foco</h2>
                    <div class="flex bg-gray-900/50 p-1 rounded-xl border border-gray-800">
                        <button class="tab-btn px-4 py-1.5 rounded-lg text-xs font-bold active bg-gray-800 text-blue-400" data-tab="w1">Semana 1</button>
                        <button class="tab-btn px-4 py-1.5 rounded-lg text-xs font-bold text-gray-500" data-tab="w2">Semana 2</button>
                    </div>
                </div>

                <div id="w1" class="tab-content grid grid-cols-1 md:grid-cols-2 gap-3">
                    <!-- Tasks will be generated or mapped here -->
                </div>
                <div id="w2" class="tab-content hidden grid grid-cols-1 md:grid-cols-2 gap-3">
                    <!-- Tasks Semana 2 -->
                </div>
            </section>

            <!-- NOTES SECTION -->
            <section id="notes" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-3">
                    <h3 class="text-sm font-bold flex items-center gap-2">
                        <i data-lucide="pencil-line" class="w-4 h-4 text-blue-400"></i>
                        Di√°rio de Bordo
                    </h3>
                    <textarea id="dailyNotes" class="w-full glass rounded-2xl p-4 text-sm focus:ring-2 focus:ring-blue-500/50 outline-none h-40 custom-scrollbar" placeholder="O que aprendi hoje? Quais dificuldades tive?"></textarea>
                </div>
                <div class="space-y-3">
                    <h3 class="text-sm font-bold flex items-center gap-2">
                        <i data-lucide="sticky-note" class="w-4 h-4 text-yellow-400"></i>
                        Rascunho R√°pido
                    </h3>
                    <textarea id="scratch" class="w-full glass rounded-2xl p-4 text-sm focus:ring-2 focus:ring-yellow-500/50 outline-none h-40 custom-scrollbar" placeholder="Links, prompts, ideias soltas..."></textarea>
                </div>
            </section>

            <!-- ASSISTANT SECTION -->
            <section id="assistant" class="glass p-6 rounded-3xl space-y-4 border-l-4 border-l-blue-500">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center">
                        <i data-lucide="sparkles" class="text-blue-400 w-5 h-5"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-bold">Assistente de Carreira QA</h2>
                        <p class="text-xs text-gray-400">D√∫vidas sobre o pr√≥ximo passo? Pergunte abaixo.</p>
                    </div>
                </div>
                
                <div class="flex gap-2">
                    <input id="ask" type="text" class="flex-1 bg-gray-900/50 border border-gray-800 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-blue-500/50 outline-none" placeholder="O que eu devo fazer agora?">
                    <button id="askBtn" class="bg-blue-600 hover:bg-blue-500 p-3 rounded-xl transition-all">
                        <i data-lucide="arrow-right" class="w-5 h-5"></i>
                    </button>
                </div>
                <div id="answer" class="hidden glass bg-blue-900/10 border-blue-500/20 p-4 rounded-xl text-sm leading-relaxed text-blue-100 whitespace-pre-line animate-in fade-in slide-in-from-top-2 duration-300">
                </div>
            </section>

        </main>
    </div>

    <footer class="text-center py-12 text-gray-600 text-[10px] uppercase tracking-[0.2em]">
        Painel de Controle ‚Äî Breno &copy; 2024 ‚Äî Const√¢ncia > Intensidade
    </footer>

    <script>
        // --- CONFIGURA√á√ÉO E DADOS ---
        const LS = "painelQA_breno_v4"; // Incrementado vers√£o para novo design
        const todayKey = () => new Date().toISOString().slice(0, 10);
        
        const tasksData = {
            w1: [
                { id: "w1_mon", title: "Segunda", desc: "Criar repo + README estrat√©gico" },
                { id: "w1_tue", title: "Ter√ßa", desc: "10 Casos de Teste (Cen√°rios Login)" },
                { id: "w1_wed", title: "Quarta", desc: "Simular 3 Bug Reports detalhados" },
                { id: "w1_thu", title: "Quinta", desc: "Postman: Requests b√°sicos + prints" },
                { id: "w1_fri", title: "Sexta", desc: "Revis√£o Geral + LinkedIn Update" },
                { id: "w1_meta", title: "Meta Semanal", desc: "25 candidaturas enviadas" },
            ],
            w2: [
                { id: "w2_mon", title: "Segunda", desc: "Postman: Collections e Vari√°veis" },
                { id: "w2_tue", title: "Ter√ßa", desc: "API Tests: 6 valida√ß√µes (200/400)" },
                { id: "w2_wed", title: "Quarta", desc: "Cypress: Setup e Primeiro Script" },
                { id: "w2_thu", title: "Quinta", desc: "2 Testes E2E Completos (UI)" },
                { id: "w2_fri", title: "Sexta", desc: "Evid√™ncias e Documenta√ß√£o Final" },
                { id: "w2_meta", title: "Meta Semanal", desc: "25 candidaturas enviadas" },
            ]
        };

        const el = (q) => document.querySelector(q);
        const els = (q) => Array.from(document.querySelectorAll(q));

        function load() {
            try { return JSON.parse(localStorage.getItem(LS) || "{}"); }
            catch { return {}; }
        }

        function save(state) {
            localStorage.setItem(LS, JSON.stringify(state));
        }

        const state = load();
        state.logs = state.logs || {};
        state.today = state.today || {};
        
        // --- INICIALIZA√á√ÉO DA UI ---
        
        function init() {
            lucide.createIcons();
            el("#todayDate").textContent = todayKey();

            // Renderizar Checklists de Semanas
            renderWeeks();
            
            // Listeners Hoje
            const todayChecks = els('input[data-today]');
            todayChecks.forEach(cb => {
                const k = cb.dataset.today;
                const tk = todayKey();
                cb.checked = !!(state.today[tk] && state.today[tk][k]);
                
                cb.addEventListener("change", () => {
                    state.today[tk] = state.today[tk] || {};
                    state.today[tk][k] = cb.checked;
                    save(state);
                    recalc();
                });
            });

            // Listeners Semanas
            const weekChecks = els('input[data-task]');
            weekChecks.forEach(cb => {
                const id = cb.dataset.task;
                cb.checked = !!state[id];
                cb.addEventListener("change", () => {
                    state[id] = cb.checked;
                    save(state);
                    recalc();
                });
            });

            // Notas
            const dn = el("#dailyNotes");
            const sc = el("#scratch");
            dn.value = state.dailyNotes || "";
            sc.value = state.scratch || "";
            dn.addEventListener("input", () => { state.dailyNotes = dn.value; save(state); });
            sc.addEventListener("input", () => { state.scratch = sc.value; save(state); });

            // Bot√µes globais
            el("#markDay").addEventListener("click", () => {
                const tk = todayKey();
                state.today[tk] = { study: true, project: true, jobs: true, train: true };
                todayChecks.forEach(cb => cb.checked = true);
                save(state);
                recalc();
            });

            el("#saveTodayAsLog").addEventListener("click", () => {
                const tk = todayKey();
                const t = state.today[tk] || {};
                state.logs[tk] = { ...t };
                save(state);
                recalc();
                alert("Dia arquivado com sucesso!");
            });

            // Tabs
            els(".tab-btn").forEach(btn => {
                btn.addEventListener("click", () => {
                    els(".tab-btn").forEach(b => b.classList.remove("bg-gray-800", "text-blue-400"));
                    els(".tab-content").forEach(c => c.classList.add("hidden"));
                    btn.classList.add("bg-gray-800", "text-blue-400");
                    el("#" + btn.dataset.tab).classList.remove("hidden");
                });
            });

            // Backup e Reset
            el("#exportBtn").addEventListener("click", () => {
                const blob = new Blob([JSON.stringify(state, null, 2)], { type: "application/json" });
                const a = document.createElement("a");
                a.href = URL.createObjectURL(blob);
                a.download = `qa-tracker-backup-${todayKey()}.json`;
                a.click();
            });

            el("#importInput").addEventListener("change", async (e) => {
                const file = e.target.files[0];
                if (!file) return;
                const text = await file.text();
                localStorage.setItem(LS, text);
                location.reload();
            });

            el("#resetBtn").addEventListener("click", () => {
                if (confirm("Resetar TUDO? Essa a√ß√£o √© permanente.")) {
                    localStorage.removeItem(LS);
                    location.reload();
                }
            });

            recalc();
        }

        function renderWeeks() {
            Object.keys(tasksData).forEach(week => {
                const container = el(`#${week}`);
                container.innerHTML = tasksData[week].map(task => `
                    <label class="relative group cursor-pointer">
                        <input type="checkbox" data-task="${task.id}" class="checkbox-card hidden peer" ${state[task.id] ? 'checked' : ''}>
                        <div class="glass p-4 rounded-xl border border-transparent peer-checked:border-gray-600 transition-all flex items-center gap-3">
                            <div class="w-8 h-8 rounded-lg bg-gray-800 flex items-center justify-center text-xs peer-checked:bg-blue-600/20 peer-checked:text-blue-400">
                                <i data-lucide="check" class="w-4 h-4"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-bold text-xs">${task.title}</p>
                                <p class="text-[10px] text-gray-500 line-clamp-1">${task.desc}</p>
                            </div>
                        </div>
                    </label>
                `).join("");
            });
        }

        // --- L√ìGICA DE RECALCULO E ANALYTICS ---

        let chart;
        function recalc() {
            const tk = todayKey();
            const t = state.today[tk] || {};
            const todayCount = Object.values(t).filter(Boolean).length;
            
            el("#todayPill").textContent = `${todayCount}/4`;

            // Progresso Barra
            const allWeekIds = [...tasksData.w1, ...tasksData.w2].map(t => t.id);
            const doneWeek = allWeekIds.filter(id => state[id]).length;
            const totalTasks = allWeekIds.length + 4; // semanas + hoje
            const doneTotal = doneWeek + todayCount;
            const pct = Math.round((doneTotal / totalTasks) * 100);
            
            el("#bar").style.width = pct + "%";
            el("#pct").textContent = pct + "%";

            // Streak & Consistencia
            const logs = state.logs || {};
            const streak = calculateStreak(logs);
            el("#streak").textContent = streak;
            el("#streakPill").textContent = `${streak} üî•`;

            const fullDays = Object.values(logs).filter(v => Object.values(v).filter(Boolean).length === 4).length;
            el("#daysDone").textContent = fullDays;

            // Chart
            updateChart(logs);
        }

        function calculateStreak(logs) {
            let s = 0;
            let d = new Date();
            while (true) {
                const k = d.toISOString().slice(0, 10);
                const entry = logs[k];
                const score = entry ? Object.values(entry).filter(Boolean).length : 0;
                if (score === 4) { s++; d.setDate(d.getDate() - 1); }
                else break;
            }
            return s;
        }

        function updateChart(logs) {
            const days = [];
            const scores = [];
            const d = new Date();
            for (let i = 20; i >= 0; i--) {
                const x = new Date(d);
                x.setDate(d.getDate() - i);
                const k = x.toISOString().slice(0, 10);
                days.push(k.slice(8, 10) + "/" + k.slice(5, 7));
                const entry = logs[k];
                scores.push(entry ? Object.values(entry).filter(Boolean).length : 0);
            }

            const ctx = el("#chart").getContext("2d");
            if (chart) chart.destroy();
            chart = new Chart(ctx, {
                type: "line",
                data: {
                    labels: days,
                    datasets: [{
                        label: "Checkins",
                        data: scores,
                        borderColor: "#3b82f6",
                        backgroundColor: "rgba(59, 130, 246, 0.1)",
                        fill: true,
                        tension: 0.4,
                        borderWidth: 3,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { min: 0, max: 4, grid: { color: "rgba(255,255,255,0.05)" }, ticks: { stepSize: 1, color: "#4b5563" } },
                        x: { grid: { display: false }, ticks: { color: "#4b5563", font: { size: 9 } } }
                    }
                }
            });
        }

        // --- ASSISTENTE ---
        el("#askBtn").addEventListener("click", () => {
            const q = el("#ask").value.toLowerCase();
            const ans = el("#answer");
            ans.classList.remove("hidden");
            
            let response = "Hmm, n√£o entendi muito bem. Tente perguntar sobre 'vagas', 'cypress', 'o que fazer agora' ou 'postman'.";
            
            if (q.includes("agora") || q.includes("fazer") || q.includes("passo")) {
                const next = [...tasksData.w1, ...tasksData.w2].find(t => !state[t.id]);
                response = `üöÄ FOCO AGORA:\n\n1. Verifique se concluiu os 4 itens de HOJE.\n2. Sua pr√≥xima tarefa t√©cnica √©: **${next ? next.title + ' - ' + next.desc : 'Todas as semanas conclu√≠das! Parab√©ns.'}**.\n\nConst√¢ncia √© melhor que velocidade.`;
            } else if (q.includes("vagas") || q.includes("oportunidade")) {
                response = "üéØ ESTRAT√âGIA DE VAGAS:\n\n- Aplique para 5 vagas/dia.\n- Filtre por 'Est√°gio QA' ou 'Junior QA' no LinkedIn (√∫ltimas 24h).\n- Personalize sua mensagem de conex√£o se o recrutador estiver vis√≠vel.";
            } else if (q.includes("cypress") || q.includes("automa√ß√£o")) {
                response = "üõ†Ô∏è DICA CYPRESS:\n\nComece pelo b√°sico: 'cy.visit()', 'cy.get()'. N√£o tente automatizar tudo agora. Foque em fazer 2 fluxos (Login Sucesso / Login Falha) e salvar no GitHub.";
            }

            ans.textContent = response;
        });

        window.onload = init;
    </script>
</body>
</html>
